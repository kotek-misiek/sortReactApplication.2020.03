{"ast":null,"code":"var _jsxFileName = \"c:\\\\projects\\\\react-app\\\\src\\\\sorting\\\\Autorization.js\";\nimport Axios from 'axios';\nimport Block from './utils/Block';\nimport React from 'react';\nimport \"./GeneralSorting.css\";\nimport cookie from \"react-cookies\";\nimport { properties } from './../env.properties';\n\nclass Autorization extends Block {\n  constructor(props) {\n    super(props);\n    this.reference = React.createRef();\n    this.state.userName = cookie.load(\"userName\");\n  }\n\n  userNameChange(event) {\n    this.state.userName = event.target.value;\n  }\n\n  passwordChange(event) {\n    this.state.password = event.target.value;\n  }\n\n  handleUnauthButton(event) {\n    const CONFIG = {\n      headers: {\n        \"Authorization\": \"Bearer \" + cookie.load(\"token\")\n      }\n    };\n    Axios.get(properties.logoutPath, CONFIG);\n    cookie.remove(\"token\");\n    cookie.remove(\"userName\");\n    this.props.setStateParam(\"token\", undefined);\n    this.props.setStateParam(\"userName\", undefined);\n    this.props.setStateParam(\"password\", undefined);\n    this.setStateParam(\"userName\", undefined);\n    this.setStateParam(\"password\", undefined);\n  }\n\n  handleAuthButton(event) {\n    var postBody = \"username=\" + this.state.userName + \"&password=\" + this.state.password;\n    Axios.post(properties.tokenPath, postBody).then(response => {\n      this.props.setStateParam(\"token\", response.data);\n      cookie.save(\"userName\", this.state.userName, {\n        maxAge: properties.cookiesSec\n      });\n      cookie.save(\"token\", response.data, {\n        maxAge: properties.cookiesSec\n      });\n    }).catch(error => {\n      alert(\"error: \" + error.response.data === undefined ? error.message : error.response.data);\n      this.props.setStateParam(\"token\", undefined);\n      cookie.remove(\"token\");\n    });\n  }\n\n  renderAutorized() {\n    return React.createElement(\"div\", {\n      ref: this.reference,\n      style: this.border,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, \"Hello, \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, this.state.userName), \"!\"), React.createElement(\"button\", {\n      onClick: this.handleUnauthButton = this.handleUnauthButton.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, \"Logout\"));\n  }\n\n  renderUnautorized() {\n    return React.createElement(\"div\", {\n      ref: this.reference,\n      style: this.border,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: this.bold,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Autorization block\"), React.createElement(\"div\", {\n      style: this.rightAlign,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"User name:\\xA0\", React.createElement(\"input\", {\n      type: \"text\",\n      defaultValue: this.state.userName,\n      onBlur: this.userNameChange = this.userNameChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      style: this.rightAlign,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"Password:\\xA0\", React.createElement(\"input\", {\n      type: \"password\",\n      defaultValue: this.state.password,\n      onBlur: this.passwordChange = this.passwordChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }))), React.createElement(\"button\", {\n      onClick: this.handleAuthButton = this.handleAuthButton.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Log in\"));\n  }\n\n  render() {\n    return this.props.getStateParam(\"token\") === undefined || this.state.userName === undefined ? this.renderUnautorized() : this.renderAutorized();\n  }\n\n}\n\nexport default Autorization;","map":{"version":3,"sources":["c:/projects/react-app/src/sorting/Autorization.js"],"names":["Axios","Block","React","cookie","properties","Autorization","constructor","props","reference","createRef","state","userName","load","userNameChange","event","target","value","passwordChange","password","handleUnauthButton","CONFIG","headers","get","logoutPath","remove","setStateParam","undefined","handleAuthButton","postBody","post","tokenPath","then","response","data","save","maxAge","cookiesSec","catch","error","alert","message","renderAutorized","border","bind","renderUnautorized","bold","rightAlign","render","getStateParam"],"mappings":"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","sourcesContent":["import Axios from 'axios';\r\nimport Block from './utils/Block';\r\nimport React from 'react';\r\nimport \"./GeneralSorting.css\";\r\nimport cookie from \"react-cookies\";\r\nimport { properties } from './../env.properties';\r\n\r\n\r\nclass Autorization extends Block {\r\n    constructor(props) {\r\n        super(props);\r\n        this.reference = React.createRef();\r\n        this.state.userName = cookie.load(\"userName\");\r\n    }\r\n\r\n    userNameChange(event) {\r\n        this.state.userName = event.target.value;\r\n    }\r\n\r\n    passwordChange(event) {\r\n        this.state.password = event.target.value;\r\n    }\r\n\r\n    handleUnauthButton(event) {\r\n        const CONFIG = {headers: {\"Authorization\": \"Bearer \" + cookie.load(\"token\")}};\r\n        Axios.get(properties.logoutPath, CONFIG);\r\n        \r\n        cookie.remove(\"token\");\r\n        cookie.remove(\"userName\");\r\n\r\n        this.props.setStateParam(\"token\", undefined);\r\n        this.props.setStateParam(\"userName\", undefined);\r\n        this.props.setStateParam(\"password\", undefined);\r\n        this.setStateParam(\"userName\", undefined);\r\n        this.setStateParam(\"password\", undefined);\r\n\r\n    }\r\n\r\n    handleAuthButton(event) {\r\n        var postBody = \"username=\" + this.state.userName + \"&password=\" + this.state.password;\r\n        Axios.post(properties.tokenPath, postBody)\r\n            .then(response => {\r\n                this.props.setStateParam(\"token\", response.data);\r\n                cookie.save(\"userName\", this.state.userName, {maxAge: properties.cookiesSec});\r\n                cookie.save(\"token\", response.data, {maxAge: properties.cookiesSec});\r\n            })\r\n            .catch(error => {\r\n                alert(\"error: \" + error.response.data === undefined ? error.message : error.response.data);\r\n                this.props.setStateParam(\"token\", undefined);\r\n                cookie.remove(\"token\");\r\n            });\r\n    }\r\n\r\n    renderAutorized() {\r\n        return (\r\n            <div ref={this.reference} style={this.border}>\r\n                <div>Hello, <b>{this.state.userName}</b>!</div>\r\n                <button onClick={this.handleUnauthButton=this.handleUnauthButton.bind(this)}>Logout</button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderUnautorized() {\r\n        return (\r\n            <div ref={this.reference} style={this.border}>\r\n                <div style={this.bold}>Autorization block</div>\r\n                <div style={this.rightAlign}>\r\n                    <label> \r\n                        User name:&nbsp;\r\n                        <input type=\"text\" defaultValue={this.state.userName} onBlur={this.userNameChange=this.userNameChange.bind(this)} />\r\n                    </label>\r\n                </div>\r\n                <div style={this.rightAlign}>\r\n                    <label> \r\n                        Password:&nbsp;\r\n                        <input type=\"password\" defaultValue={this.state.password} onBlur={this.passwordChange=this.passwordChange.bind(this)} />\r\n                    </label>\r\n                </div>\r\n                <button onClick={this.handleAuthButton=this.handleAuthButton.bind(this)}>Log in</button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (this.props.getStateParam(\"token\") === undefined || this.state.userName === undefined) \r\n            ? this.renderUnautorized() \r\n            : this.renderAutorized();\r\n    }\r\n}\r\n\r\nexport default Autorization;"]},"metadata":{},"sourceType":"module"}